<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprendiz do Reino OIDC - Flashcards Interativos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/style.css">
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <style>
        .flashcard {
            perspective: 1000px;
            height: 300px;
            margin: 20px 0;
        }
        
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .flashcard-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .flashcard-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
        }
        
        .path-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .path-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .character-badge {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .difficulty-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">üè∞ Reino OIDC</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">üè† In√≠cio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="personagens.html">üë• Personagens</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            üìñ Hist√≥ria
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="historia_p1.html">Parte I - A Era Sombria</a></li>
                            <li><a class="dropdown-item" href="historia_p2.html">Parte II - A Chegada do OIDC</a></li>
                            <li><a class="dropdown-item" href="historia_p3.html">Parte III - A Nova Era</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="conclusao.html">Conclus√£o</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="mundo_do_conhecimento.html">üåü Conhecimento</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="caminho_feliz.html">‚ú® Caminho Feliz</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="aprendiz.html">üéì Aprendiz</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="glossario.html">üìö Gloss√°rio</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- P√°gina Inicial - Sele√ß√£o de Caminhos -->
        <div id="pathSelection" class="row">
            <div class="col-12">
                <div class="text-center mb-5">
                    <h1 class="display-4 text-primary">üéì Academia do Reino OIDC</h1>
                    <p class="lead">Teste seus conhecimentos com flashcards interativos</p>
                    <p class="text-muted">Escolha seu caminho de aprendizado e domine os conceitos OAuth 2.1 e OpenID Connect</p>
                </div>
            </div>

            <!-- Caminho do Iniciante -->
            <div class="col-md-4 mb-4">
                <div class="card path-card h-100 border-success" onclick="startPath('iniciante')">
                    <div class="card-header bg-success text-white text-center position-relative">
                        <span class="difficulty-badge badge bg-light text-success">Iniciante</span>
                        <h4 class="mb-0">üå± Caminho do Iniciante</h4>
                    </div>
                    <div class="card-body text-center">
                        <div class="character-badge">üëëüßô‚Äç‚ôÇÔ∏èüßë‚Äçüíº</div>
                        <h5 class="card-title">Fundamentos B√°sicos</h5>
                        <p class="card-text">Conhe√ßa os conceitos essenciais atrav√©s de Lady OAuth, Lord OIDC e Alex Client</p>
                        <ul class="list-unstyled text-start">
                            <li>‚úÖ O que √© OAuth vs OIDC</li>
                            <li>‚úÖ Autoriza√ß√£o vs Autentica√ß√£o</li>
                            <li>‚úÖ Papel do Cliente</li>
                            <li>‚úÖ Conceitos de Tokens</li>
                        </ul>
                        <div class="mt-3">
                            <span class="badge bg-success">20 Perguntas</span>
                            <span class="badge bg-outline-success">40 Respostas</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Caminho do Aventureiro -->
            <div class="col-md-4 mb-4">
                <div class="card path-card h-100 border-warning" onclick="startPath('aventureiro')">
                    <div class="card-header bg-warning text-dark text-center position-relative">
                        <span class="difficulty-badge badge bg-light text-warning">Intermedi√°rio</span>
                        <h4 class="mb-0">‚öîÔ∏è Caminho do Aventureiro</h4>
                    </div>
                    <div class="card-body text-center">
                        <div class="character-badge">üßöüßù‚Äç‚ôÄÔ∏èüõ°Ô∏è</div>
                        <h5 class="card-title">Seguran√ßa e Tokens</h5>
                        <p class="card-text">Domine os mecanismos de seguran√ßa com Pixie PKCE, IDA Token e Ace Token</p>
                        <ul class="list-unstyled text-start">
                            <li>‚ö° PKCE e Prote√ß√£o</li>
                            <li>‚ö° ID Token vs Access Token</li>
                            <li>‚ö° JWT e Assinaturas</li>
                            <li>‚ö° Escopos e Permiss√µes</li>
                        </ul>
                        <div class="mt-3">
                            <span class="badge bg-warning">20 Perguntas</span>
                            <span class="badge bg-outline-warning">40 Respostas</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Caminho do Mestre -->
            <div class="col-md-4 mb-4">
                <div class="card path-card h-100 border-danger" onclick="startPath('mestre')">
                    <div class="card-header bg-danger text-white text-center position-relative">
                        <span class="difficulty-badge badge bg-light text-danger">Avan√ßado</span>
                        <h4 class="mb-0">üèÜ Caminho do Mestre</h4>
                    </div>
                    <div class="card-body text-center">
                        <div class="character-badge">üè¶üë©‚Äçüíª</div>
                        <h5 class="card-title">Implementa√ß√£o Pr√°tica</h5>
                        <p class="card-text">Aprenda implementa√ß√£o real com Seraph Resource e Devia Desenvolvedora</p>
                        <ul class="list-unstyled text-start">
                            <li>üî• Resource Servers</li>
                            <li>üî• Valida√ß√£o de Tokens</li>
                            <li>üî• Fluxos Completos</li>
                            <li>üî• Boas Pr√°ticas</li>
                        </ul>
                        <div class="mt-3">
                            <span class="badge bg-danger">20 Perguntas</span>
                            <span class="badge bg-outline-danger">40 Respostas</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interface de Flashcards -->
        <div id="flashcardInterface" class="d-none">
            <div class="row">
                <div class="col-12">
                    <!-- Cabe√ßalho do Quiz -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-0" id="pathTitle">Caminho Selecionado</h5>
                                <small class="text-muted" id="pathDescription">Descri√ß√£o do caminho</small>
                            </div>
                            <div class="text-end">
                                <div class="progress" style="width: 200px; height: 20px;">
                                    <div class="progress-bar" id="progressBar" role="progressbar" style="width: 0%"></div>
                                </div>
                                <small class="text-muted mt-1 d-block">
                                    Pergunta <span id="currentQuestion">1</span> de <span id="totalQuestions">20</span>
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- Flashcard -->
                    <div class="row justify-content-center">
                        <div class="col-md-8">
                            <div class="flashcard" id="flashcard" onclick="flipCard()">
                                <div class="flashcard-inner" id="flashcardInner">
                                    <div class="flashcard-front">
                                        <div>
                                            <div class="character-badge" id="questionCharacter">ü§î</div>
                                            <h4 id="questionText">Clique para come√ßar</h4>
                                            <p class="mt-3"><small>Clique para ver a resposta</small></p>
                                        </div>
                                    </div>
                                    <div class="flashcard-back">
                                        <div>
                                            <div class="row">
                                                <div class="col-md-6 border-end">
                                                    <h6>üë∂ Para Leigos</h6>
                                                    <p id="answerLeigo" class="small">Resposta em linguagem simples</p>
                                                </div>
                                                <div class="col-md-6">
                                                    <h6>üîß Para T√©cnicos</h6>
                                                    <p id="answerTecnico" class="small">Resposta t√©cnica detalhada</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Controles -->
                            <div class="text-center mt-4">
                                <button class="btn btn-outline-secondary me-2" onclick="previousCard()" id="btnPrevious" disabled>
                                    ‚¨ÖÔ∏è Anterior
                                </button>
                                <button class="btn btn-primary me-2" onclick="nextCard()" id="btnNext">
                                    Pr√≥xima ‚û°Ô∏è
                                </button>
                                <button class="btn btn-outline-danger me-2" onclick="resetPath()">
                                    üîÑ Reiniciar
                                </button>
                                <button class="btn btn-success" onclick="goBackToSelection()">
                                    üìö Escolher Outro Caminho
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Resultados finais -->
                    <div id="completionCard" class="card mt-4 d-none">
                        <div class="card-header bg-success text-white text-center">
                            <h4>üéâ Parab√©ns! Caminho Conclu√≠do!</h4>
                        </div>
                        <div class="card-body text-center">
                            <p class="lead">Voc√™ completou todas as 20 perguntas deste caminho!</p>
                            <div class="row mt-4">
                                <div class="col-md-4">
                                    <div class="card border-primary">
                                        <div class="card-body">
                                            <h5>üéØ Pr√≥ximos Passos</h5>
                                            <a href="mundo_do_conhecimento.html" class="btn btn-primary">Conhecimento T√©cnico</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card border-info">
                                        <div class="card-body">
                                            <h5>‚ö° Pr√°tica</h5>
                                            <a href="caminho_feliz.html" class="btn btn-info">Caminho Feliz</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card border-warning">
                                        <div class="card-body">
                                            <h5>üìñ Consultas</h5>
                                            <a href="glossario.html" class="btn btn-warning">Gloss√°rio</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-3 mt-5">
        <div class="container">
            <p>&copy; 2025 Reino OIDC - Academia Interativa de OAuth 2.1 e OpenID Connect</p>
            <p><small>Projeto educativo open source - <a href="https://github.com/chmulato/reino_oidc" class="text-info">GitHub</a></small></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Dados dos flashcards organizados por caminho
        const flashcardData = {
            iniciante: {
                title: "üå± Caminho do Iniciante",
                description: "Fundamentos b√°sicos com Lady OAuth, Lord OIDC e Alex Client",
                cards: [
                    {
                        character: "üëë",
                        question: "O que Lady OAuth representa no Reino OIDC?",
                        leigo: "Lady OAuth √© como uma porteira que decide quem pode entrar em cada lugar. Ela n√£o se importa com quem voc√™ √©, s√≥ quer saber se voc√™ tem permiss√£o.",
                        tecnico: "Lady OAuth representa o protocolo OAuth 2.1, respons√°vel pela autoriza√ß√£o. Ela define e controla o acesso a recursos protegidos atrav√©s de tokens de acesso."
                    },
                    {
                        character: "üßô‚Äç‚ôÇÔ∏è",
                        question: "Qual √© a diferen√ßa entre Lady OAuth e Lord OIDC?",
                        leigo: "Lady OAuth pergunta 'o que voc√™ pode fazer?', enquanto Lord OIDC responde 'quem voc√™ √©'. Um cuida da permiss√£o, o outro da identidade.",
                        tecnico: "OAuth 2.1 fornece autoriza√ß√£o (acesso a recursos), enquanto OIDC adiciona autentica√ß√£o (verifica√ß√£o de identidade) atrav√©s de ID tokens al√©m dos access tokens."
                    },
                    {
                        character: "üßë‚Äçüíº",
                        question: "Qual √© o papel de Alex Client no reino?",
                        leigo: "Alex √© como um carteiro que leva mensagens entre voc√™ e os servi√ßos. Ele n√£o guarda suas senhas, s√≥ pede permiss√£o para acessar o que voc√™ autorizar.",
                        tecnico: "Alex Client representa a aplica√ß√£o cliente que inicia o fluxo OAuth/OIDC, redirecionando o usu√°rio para autentica√ß√£o e recebendo tokens para acessar recursos."
                    },
                    {
                        character: "üëë",
                        question: "O que s√£o tokens no contexto do Reino OIDC?",
                        leigo: "Tokens s√£o como pulseirinhas de festa que provam que voc√™ tem permiss√£o para estar em determinados lugares. Elas expiram e precisam ser renovadas.",
                        tecnico: "Tokens s√£o strings criptograficamente seguras que representam autoriza√ß√£o (access token) ou identidade (ID token), com tempo de expira√ß√£o e escopo limitado."
                    },
                    {
                        character: "üßô‚Äç‚ôÇÔ∏è",
                        question: "Por que o Reino precisa de dois protocolos (OAuth + OIDC)?",
                        leigo: "√â como precisar de duas coisas: uma carteira de motorista (prova quem voc√™ √©) e uma permiss√£o especial (prova o que pode fazer). Cada uma tem fun√ß√£o diferente.",
                        tecnico: "OAuth resolve autoriza√ß√£o mas n√£o identidade. OIDC estende OAuth para incluir autentica√ß√£o padronizada, fornecendo informa√ß√µes verific√°veis sobre o usu√°rio."
                    },
                    {
                        character: "üßë‚Äçüíº",
                        question: "Como Alex Client obt√©m permiss√£o para acessar dados?",
                        leigo: "Alex pede para o usu√°rio: 'Posso acessar suas fotos?'. Se o usu√°rio disser sim, Alex recebe uma permiss√£o tempor√°ria, mas nunca a senha.",
                        tecnico: "Atrav√©s do Authorization Code Flow: Alex redireciona para o Authorization Server, usu√°rio autentica, Alex recebe c√≥digo e troca por tokens."
                    },
                    {
                        character: "üëë",
                        question: "O que significa 'delega√ß√£o de acesso' no OAuth?",
                        leigo: "√â como dar uma chave tempor√°ria da sua casa para algu√©m limpar apenas a sala, sem dar acesso ao quarto. Controle limitado e tempor√°rio.",
                        tecnico: "Permite que aplica√ß√µes acessem recursos em nome do usu√°rio com escopo limitado, sem compartilhar credenciais, atrav√©s de tokens com permiss√µes espec√≠ficas."
                    },
                    {
                        character: "üßô‚Äç‚ôÇÔ∏è",
                        question: "Qual √© a principal diferen√ßa entre autentica√ß√£o e autoriza√ß√£o?",
                        leigo: "Autentica√ß√£o √© 'quem voc√™ √©' (mostrar RG), autoriza√ß√£o √© 'o que pode fazer' (ter permiss√£o para entrar na festa VIP).",
                        tecnico: "Autentica√ß√£o verifica identidade do usu√°rio (OIDC), autoriza√ß√£o determina quais recursos o usu√°rio/aplica√ß√£o pode acessar (OAuth)."
                    },
                    {
                        character: "üßë‚Äçüíº",
                        question: "Por que Alex Client n√£o armazena senhas de usu√°rios?",
                        leigo: "√â mais seguro! √â como um hotel que n√£o guarda c√≥pia da sua chave de casa, mas te d√° uma chave tempor√°ria do quarto apenas.",
                        tecnico: "Reduz superf√≠cie de ataque e responsabilidade. Senhas ficam apenas no Authorization Server especializado, cliente recebe apenas tokens limitados."
                    },
                    {
                        character: "üëë",
                        question: "O que acontece quando um token expira?",
                        leigo: "√â como um ticket de estacionamento que vence. Voc√™ precisa renovar ou pegar um novo, mas n√£o precisa mostrar documento de novo se tiver um refresh token.",
                        tecnico: "Access token inv√°lido, aplica√ß√£o deve usar refresh token para obter novo access token, ou redirecionar usu√°rio para nova autentica√ß√£o se necess√°rio."
                    },
                    {
                        character: "üßô‚Äç‚ôÇÔ∏è",
                        question: "Como Lord OIDC garante que as informa√ß√µes de identidade s√£o confi√°veis?",
                        leigo: "Como um cart√≥rio que certifica documentos. Lord OIDC assina digitalmente as informa√ß√µes, ent√£o qualquer um pode verificar se s√£o verdadeiras.",
                        tecnico: "Atrav√©s de assinatura digital (JWS) nos ID tokens usando chaves p√∫blicas/privadas, permitindo verifica√ß√£o criptogr√°fica da autenticidade."
                    },
                    {
                        character: "üßë‚Äçüíº",
                        question: "Quais tipos de aplica√ß√µes Alex Client pode representar?",
                        leigo: "Alex pode ser qualquer app no seu celular, site que voc√™ usa, ou at√© aquela Smart TV que quer acessar seu Netflix.",
                        tecnico: "Aplica√ß√µes web (confidential), SPAs (public), mobile apps, desktop apps, ou qualquer software que precise acessar recursos protegidos."
                    },
                    {
                        character: "üëë",
                        question: "O que s√£o 'escopos' no contexto do OAuth?",
                        leigo: "S√£o como diferentes n√≠veis de permiss√£o. 'Ler emails' √© um escopo, 'enviar emails' √© outro. Voc√™ escolhe o que permitir para cada app.",
                        tecnico: "Strings que definem permiss√µes espec√≠ficas que uma aplica√ß√£o pode solicitar, limitando o acesso a recursos ou opera√ß√µes espec√≠ficas."
                    },
                    {
                        character: "üßô‚Äç‚ôÇÔ∏è",
                        question: "Quais informa√ß√µes est√£o normalmente em um ID Token?",
                        leigo: "Informa√ß√µes b√°sicas como seu nome, email, e um n√∫mero √∫nico que representa voc√™. Nada muito pessoal, s√≥ o necess√°rio para te identificar.",
                        tecnico: "Claims como sub (user ID), email, name, iat/exp (timestamps), aud (audience), iss (issuer), e outros atributos do usu√°rio."
                    },
                    {
                        character: "üßë‚Äçüíº",
                        question: "Como Alex Client √© identificado no sistema?",
                        leigo: "Alex tem uma carteirinha √∫nica (Client ID) que o identifica. √â como um n√∫mero de matr√≠cula que prova que ele √© um app v√°lido.",
                        tecnico: "Atrav√©s do Client ID (p√∫blico) e opcionalmente Client Secret (para apps confidential), registrados previamente no Authorization Server."
                    },
                    {
                        character: "üëë",
                        question: "Por que Lady OAuth n√£o se preocupa com identidade?",
                        leigo: "Ela √© especialista em uma coisa s√≥: decidir permiss√µes. √â como um seguran√ßa que s√≥ verifica ingressos, n√£o documentos de identidade.",
                        tecnico: "OAuth foi projetado especificamente para autoriza√ß√£o. Identidade √© responsabilidade do OIDC, mantendo separa√ß√£o clara de responsabilidades."
                    },
                    {
                        character: "üßô‚Äç‚ôÇÔ∏è",
                        question: "Quando Lord OIDC entra em a√ß√£o no fluxo?",
                        leigo: "Quando voc√™ faz login, Lord OIDC √© chamado para confirmar quem voc√™ √© e preparar uma identidade assinada para entregar junto com as permiss√µes.",
                        tecnico: "Durante o fluxo de autentica√ß√£o quando 'openid' est√° no escopo solicitado, resultando na emiss√£o de ID token junto com access token."
                    },
                    {
                        character: "üßë‚Äçüíº",
                        question: "Alex Client pode acessar dados sem o usu√°rio estar presente?",
                        leigo: "Depende do tipo de permiss√£o. Com refresh tokens, Alex pode renovar acessos sem incomodar voc√™, mas sempre dentro do que voc√™ autorizou inicialmente.",
                        tecnico: "Sim, atrav√©s de refresh tokens (quando suportado) ou client credentials flow (para acesso a recursos pr√≥prios da aplica√ß√£o)."
                    },
                    {
                        character: "üëë",
                        question: "Qual √© a principal evolu√ß√£o do OAuth 2.0 para 2.1?",
                        leigo: "OAuth 2.1 √© como uma vers√£o 'limpa' que remove coisas perigosas e torna obrigat√≥rias as pr√°ticas de seguran√ßa que antes eram opcionais.",
                        tecnico: "OAuth 2.1 remove fluxos inseguros (implicit, password), torna PKCE obrigat√≥rio, e consolida melhores pr√°ticas de seguran√ßa."
                    }
                ]
            },
            aventureiro: {
                title: "‚öîÔ∏è Caminho do Aventureiro",
                description: "Seguran√ßa e tokens com Pixie PKCE, IDA Token e Ace Token",
                cards: [
                    {
                        character: "üßö",
                        question: "O que Pixie PKCE faz para proteger o Reino?",
                        leigo: "Pixie √© como uma fada protetora que cria senhas secretas tempor√°rias. Ela garante que apenas quem iniciou o processo pode complet√°-lo.",
                        tecnico: "PKCE gera code_verifier (segredo local) e code_challenge (hash p√∫blico) para garantir que apenas o cliente original pode trocar o authorization code por tokens."
                    },
                    {
                        character: "üßù‚Äç‚ôÄÔ∏è",
                        question: "Qual √© a miss√£o de IDA Token no reino?",
                        leigo: "IDA √© a mensageira que carrega sua identidade de forma segura. Ela tem sua 'digital' criptogr√°fica que prova que as informa√ß√µes s√£o verdadeiras.",
                        tecnico: "ID Token √© um JWT que cont√©m claims sobre a identidade do usu√°rio autenticado, assinado digitalmente pelo Authorization Server para verifica√ß√£o."
                    },
                    {
                        character: "üõ°Ô∏è",
                        question: "Como Ace Token difere de IDA Token?",
                        leigo: "IDA diz 'quem voc√™ √©', Ace diz 'o que pode fazer'. IDA √© como seu RG, Ace √© como uma credencial de acesso a √°reas restritas.",
                        tecnico: "ID Token cont√©m informa√ß√µes de identidade (claims sobre o usu√°rio), Access Token cont√©m autoriza√ß√£o (permiss√µes para acessar recursos/APIs)."
                    },
                    {
                        character: "üßö",
                        question: "Por que PKCE √© obrigat√≥rio no OAuth 2.1?",
                        leigo: "Porque protege contra ladr√µes que podem interceptar c√≥digos no caminho. √â como lacrar uma carta registrada para garantir que chegue √≠ntegra.",
                        tecnico: "Previne authorization code interception attacks, especialmente importante para aplica√ß√µes p√∫blicas (mobile/SPA) que n√£o podem guardar secrets seguros."
                    },
                    {
                        character: "üßù‚Äç‚ôÄÔ∏è",
                        question: "Como verificar se um ID Token √© v√°lido?",
                        leigo: "√â como verificar se uma c√©dula de dinheiro √© verdadeira: voc√™ checa a assinatura, a data de validade e se foi emitida pelo banco certo.",
                        tecnico: "Verificar assinatura JWS usando chave p√∫blica do issuer, validar iat/exp timestamps, conferir audience (aud) e issuer (iss) claims."
                    },
                    {
                        character: "üõ°Ô∏è",
                        question: "Onde e como Ace Token deve ser armazenado?",
                        leigo: "Ace deve ser guardado em local seguro (nunca em local p√∫blico como localStorage) e sempre tratado como informa√ß√£o ultra-sens√≠vel.",
                        tecnico: "Preferencialmente server-side em session storage, ou client-side em httpOnly cookies. Nunca em localStorage ou c√≥digo JavaScript acess√≠vel."
                    },
                    {
                        character: "üßö",
                        question: "Como Pixie PKCE cria o desafio criptogr√°fico?",
                        leigo: "Pixie inventa uma senha secreta aleat√≥ria, depois cria uma vers√£o 'embaralhada' dessa senha que pode ser compartilhada publicamente.",
                        tecnico: "Gera code_verifier aleat√≥rio (43-128 chars), depois calcula code_challenge = BASE64URL(SHA256(code_verifier)) para enviar na authorization request."
                    },
                    {
                        character: "üßù‚Äç‚ôÄÔ∏è",
                        question: "Quais claims s√£o obrigat√≥rios em um ID Token?",
                        leigo: "Todo ID Token deve ter pelo menos: quem emitiu, para quem foi feito, quando expira, quando foi criado, e um identificador √∫nico do usu√°rio.",
                        tecnico: "Claims obrigat√≥rios: iss (issuer), sub (subject), aud (audience), exp (expiration), iat (issued at). Outros claims s√£o opcionais."
                    },
                    {
                        character: "üõ°Ô∏è",
                        question: "Por que Ace Token tem vida curta?",
                        leigo: "Como um passe tempor√°rio de obra: quanto menos tempo nas m√£os erradas, menor o risco. Se for roubado, logo fica in√∫til.",
                        tecnico: "Reduz janela de exposi√ß√£o em caso de comprometimento. Tokens de vida curta limitam danos e for√ßam renova√ß√£o regular via refresh tokens."
                    },
                    {
                        character: "üßö",
                        question: "Em que momento do fluxo Pixie PKCE atua?",
                        leigo: "Pixie aparece no in√≠cio (criando o desafio secreto) e no final (verificando se quem voltou √© realmente quem come√ßou a jornada).",
                        tecnico: "Na authorization request (enviando code_challenge) e na token request (enviando code_verifier para valida√ß√£o pelo Authorization Server)."
                    },
                    {
                        character: "üßù‚Äç‚ôÄÔ∏è",
                        question: "IDA Token pode ser usado para acessar APIs?",
                        leigo: "N√£o! IDA √© apenas para identifica√ß√£o. √â como usar RG para tentar entrar em √°rea restrita - voc√™ precisa de uma credencial de acesso espec√≠fica.",
                        tecnico: "N√£o. ID Token √© apenas para identifica√ß√£o do usu√°rio. Para acessar APIs, deve-se usar Access Token que cont√©m as permiss√µes necess√°rias."
                    },
                    {
                        character: "üõ°Ô∏è",
                        question: "Como Ace Token sabe quais recursos pode acessar?",
                        leigo: "Ace carrega uma lista invis√≠vel de permiss√µes (escopos). √â como um crach√° que tem escrito quais andares do pr√©dio voc√™ pode visitar.",
                        tecnico: "Atrav√©s de scopes inclu√≠dos no token (JWT claims ou valida√ß√£o server-side), que definem quais recursos/opera√ß√µes est√£o autorizados."
                    },
                    {
                        character: "üßö",
                        question: "Pixie PKCE protege contra quais tipos de ataques?",
                        leigo: "Protege contra espi√µes que ficam no meio do caminho tentando roubar c√≥digos de autoriza√ß√£o para se passar por voc√™.",
                        tecnico: "Authorization code interception attacks, man-in-the-middle attacks, e ataques onde o authorization code √© interceptado mas n√£o o code_verifier."
                    },
                    {
                        character: "üßù‚Äç‚ôÄÔ∏è",
                        question: "Qual √© a estrutura de um ID Token?",
                        leigo: "IDA Token tem tr√™s partes separadas por pontos: cabe√ßalho (tipo de assinatura), corpo (suas informa√ß√µes), e assinatura (prova de autenticidade).",
                        tecnico: "JWT com tr√™s partes Base64URL: header (algoritmo de assinatura), payload (claims do usu√°rio), signature (assinatura criptogr√°fica)."
                    },
                    {
                        character: "üõ°Ô∏è",
                        question: "Ace Token pode ser reutilizado indefinidamente?",
                        leigo: "N√£o! Ace envelhece e expira como um passe de √¥nibus. Quando expira, voc√™ precisa de um novo ou usar o 'token de renova√ß√£o' se tiver um.",
                        tecnico: "N√£o. Access tokens t√™m tempo de expira√ß√£o limitado. Para continuar acessando, use refresh token para obter novo access token."
                    },
                    {
                        character: "üßö",
                        question: "PKCE √© necess√°rio apenas para aplica√ß√µes m√≥veis?",
                        leigo: "N√£o! Pixie protege todos os tipos de aplica√ß√£o. Mesmo apps web se beneficiam dessa prote√ß√£o extra contra intercepta√ß√£o.",
                        tecnico: "OAuth 2.1 torna PKCE obrigat√≥rio para todos os clientes, n√£o apenas p√∫blicos. Adiciona camada extra de seguran√ßa para todos os cen√°rios."
                    },
                    {
                        character: "üßù‚Äç‚ôÄÔ∏è",
                        question: "Como detectar se um ID Token foi modificado?",
                        leigo: "Verificando a assinatura digital. Se algu√©m mexeu no conte√∫do, a assinatura n√£o vai 'bater' mais, como um lacre violado.",
                        tecnico: "Validando a assinatura JWS usando a chave p√∫blica do issuer. Qualquer altera√ß√£o no header ou payload invalidar√° a assinatura."
                    },
                    {
                        character: "üõ°Ô∏è",
                        question: "Ace Token pode conter informa√ß√µes do usu√°rio?",
                        leigo: "Ace normalmente s√≥ carrega permiss√µes, n√£o informa√ß√µes pessoais. √â como um crach√° de acesso que n√£o precisa ter sua foto, s√≥ as autoriza√ß√µes.",
                        tecnico: "Pode conter claims b√°sicos como sub (user ID), mas seu prop√≥sito prim√°rio √© autoriza√ß√£o (scopes). Informa√ß√µes detalhadas ficam no ID Token."
                    },
                    {
                        character: "üßö",
                        question: "Como Pixie PKCE evita replay attacks?",
                        leigo: "Cada code_verifier √© √∫nico e usado apenas uma vez. √â como um ticket de cinema: mesmo que algu√©m copie, s√≥ funciona para uma sess√£o espec√≠fica.",
                        tecnico: "Code_verifier √© gerado aleatoriamente para cada fluxo e pode ser usado apenas uma vez. Authorization Server invalida c√≥digos ap√≥s primeiro uso."
                    },
                    {
                        character: "üßù‚Äç‚ôÄÔ∏è",
                        question: "IDA Token deve ser enviado em URLs?",
                        leigo: "Nunca! URLs ficam em logs, hist√≥rico do navegador e podem vazar. IDA deve viajar apenas por canais seguros e protegidos.",
                        tecnico: "N√£o. ID Tokens devem ser transmitidos apenas via POST request body ou headers, nunca em URL parameters devido a riscos de exposi√ß√£o."
                    }
                ]
            },
            mestre: {
                title: "üèÜ Caminho do Mestre",
                description: "Implementa√ß√£o pr√°tica com Seraph Resource e Devia Desenvolvedora",
                cards: [
                    {
                        character: "üè¶",
                        question: "Como Seraph Resource valida tokens recebidos?",
                        leigo: "Seraph √© um guarda rigoroso que verifica se o token √© verdadeiro, n√£o expirou, e se d√° permiss√£o para o que est√° sendo pedido. Tr√™s verifica√ß√µes sempre.",
                        tecnico: "Valida assinatura JWT, verifica expira√ß√£o (exp claim), confirma audience (aud), issuer (iss), e valida scopes para a opera√ß√£o solicitada."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Qual √© o primeiro passo que Devia deve fazer ao implementar OIDC?",
                        leigo: "Devia deve primeiro entender o que sua aplica√ß√£o precisa: s√≥ saber quem √© o usu√°rio, ou tamb√©m acessar dados dele em outros lugares.",
                        tecnico: "Definir requirements: apenas autentica√ß√£o (ID token) ou tamb√©m autoriza√ß√£o (access token), identificar scopes necess√°rios e escolher o fluxo apropriado."
                    },
                    {
                        character: "üè¶",
                        question: "Como Seraph deve lidar com tokens expirados?",
                        leigo: "Como um porteiro que n√£o aceita documento vencido: Seraph deve negar acesso e pedir para a pessoa renovar suas credenciais.",
                        tecnico: "Retornar HTTP 401 Unauthorized com header WWW-Authenticate indicando token expirado, for√ßando cliente a renovar via refresh token."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Como Devia pode implementar logout seguro?",
                        leigo: "Devia deve 'avisar' todos os lugares onde o usu√°rio est√° logado, invalidar tokens, e limpar todas as informa√ß√µes guardadas localmente.",
                        tecnico: "Implementar revoga√ß√£o de tokens no Authorization Server, limpar sess√µes locais, e opcionalmente usar RP-initiated logout para single logout."
                    },
                    {
                        character: "üè¶",
                        question: "Quais informa√ß√µes Seraph deve logar para auditoria?",
                        leigo: "Seraph deve anotar quem acessou o qu√™, quando, e se deu certo ou n√£o. Como um livro de visitantes detalhado para seguran√ßa.",
                        tecnico: "Timestamp, user ID (sub), client ID, recursos acessados, scopes utilizados, IP address, e resultado da opera√ß√£o (sucesso/falha)."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Como Devia deve escolher entre diferentes provedores de identidade?",
                        leigo: "Devia deve considerar: onde est√£o seus usu√°rios (Google, Microsoft, Facebook), que informa√ß√µes precisa, e qual oferece melhor seguran√ßa para seu caso.",
                        tecnico: "Avaliar compliance (SOC2, ISO27001), scopes dispon√≠veis, SLA/uptime, lat√™ncia, custos, documenta√ß√£o, e compatibilidade com OAuth 2.1/OIDC."
                    },
                    {
                        character: "üè¶",
                        question: "Como Seraph deve implementar rate limiting?",
                        leigo: "Seraph deve limitar quantas vezes algu√©m pode bater na porta por minuto. Evita que rob√¥s maliciosos sobrecarreguem o sistema.",
                        tecnico: "Implementar rate limiting por client ID, user ID, ou IP address usando algoritmos como token bucket ou sliding window, com headers informativos."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Quais valida√ß√µes Devia deve fazer no frontend vs backend?",
                        leigo: "Frontend faz verifica√ß√µes b√°sicas para experi√™ncia do usu√°rio, mas backend faz as verifica√ß√µes de seguran√ßa de verdade. Nunca confiar s√≥ no frontend.",
                        tecnico: "Frontend: valida√ß√£o de formato e UX. Backend: valida√ß√£o criptogr√°fica de tokens, verifica√ß√£o de scopes, rate limiting, e todas as valida√ß√µes de seguran√ßa."
                    },
                    {
                        character: "üè¶",
                        question: "Como Seraph deve gerenciar chaves p√∫blicas para valida√ß√£o JWT?",
                        leigo: "Seraph mant√©m uma lista atualizada das 'digitais' v√°lidas dos emissores de tokens, verificando periodicamente se n√£o mudaram.",
                        tecnico: "Implementar JWKS (JSON Web Key Set) endpoint caching com refresh autom√°tico, valida√ß√£o de chaves, e fallback para descoberta via .well-known/openid_configuration."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Como Devia deve implementar refresh token rotation?",
                        leigo: "A cada renova√ß√£o, Devia descarta o ticket antigo e emite um novo. Como trocar a fechadura cada vez que empresta a chave.",
                        tecnico: "A cada uso do refresh token, invalidar o token atual e emitir novo refresh token junto com access token, mantendo auditoria da cadeia."
                    },
                    {
                        character: "üè¶",
                        question: "Que headers HTTP Seraph deve verificar al√©m do Authorization?",
                        leigo: "Seraph deve verificar de onde vem a requisi√ß√£o, que tipo de resposta espera, e se a conex√£o est√° realmente segura (HTTPS).",
                        tecnico: "Content-Type, Accept, X-Forwarded-For, User-Agent para auditoria, e sempre verificar se requisi√ß√£o chegou via HTTPS."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Como Devia deve tratar erros de token em aplica√ß√µes SPA?",
                        leigo: "Quando token expira, Devia deve tentar renovar automaticamente. Se n√£o conseguir, redirecionar gentilmente para login sem perder trabalho do usu√°rio.",
                        tecnico: "Implementar automatic token refresh com retry logic, graceful degradation, e preserva√ß√£o de estado da aplica√ß√£o antes de redirect para login."
                    },
                    {
                        character: "üè¶",
                        question: "Como Seraph deve implementar autoriza√ß√£o granular?",
                        leigo: "Seraph verifica n√£o apenas se voc√™ pode entrar, mas exatamente o que pode fazer: ler, escrever, deletar, e em quais recursos espec√≠ficos.",
                        tecnico: "Implementar RBAC ou ABAC com scopes OAuth, resource-level permissions, e claims-based authorization para controle granular de acesso."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Quais m√©tricas Devia deve monitorar em produ√ß√£o?",
                        leigo: "Devia deve acompanhar: quantos logins por dia, quantos deram erro, tempo de resposta, e se algum comportamento estranho est√° acontecendo.",
                        tecnico: "Token refresh rate, authentication failures, lat√™ncia de valida√ß√£o, 401/403 errors, concurrent sessions, e throughput de APIs protegidas."
                    },
                    {
                        character: "üè¶",
                        question: "Como Seraph deve lidar com Cross-Origin Requests?",
                        leigo: "Seraph deve verificar se a requisi√ß√£o vem de um site confi√°vel antes de aceitar, mas permitir que apps autorizados funcionem corretamente.",
                        tecnico: "Configurar CORS adequadamente com origins espec√≠ficos, permitir credentials quando necess√°rio, e validar Origin header contra whitelist."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Como Devia deve implementar descoberta autom√°tica de configura√ß√µes OIDC?",
                        leigo: "Em vez de configurar tudo manualmente, Devia pode pedir para o provedor se apresentar: 'Quais s√£o suas URLs e como voc√™ funciona?'",
                        tecnico: "Usar .well-known/openid_configuration endpoint para descobrir authorization_endpoint, token_endpoint, jwks_uri e supported features automaticamente."
                    },
                    {
                        character: "üè¶",
                        question: "Como Seraph deve validar o claim 'audience' (aud)?",
                        leigo: "Seraph verifica se o token foi mesmo feito para ele. Como verificar se uma carta foi endere√ßada para sua casa antes de abrir.",
                        tecnico: "Validar que o aud claim cont√©m o identifier do resource server (API identifier) configurado, rejeitando tokens destinados a outros recursos."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Qual √© a melhor estrat√©gia de Devia para lidar com m√∫ltiplos Authorization Servers?",
                        leigo: "Devia pode aceitar 'carteiras de identidade' de diferentes 'pa√≠ses' (Google, Microsoft, etc.), mas deve verificar cada uma com suas pr√≥prias regras.",
                        tecnico: "Implementar multi-issuer support com valida√ß√£o espec√≠fica por issuer, discovery separado, key management isolado, e mapeamento de claims consistente."
                    },
                    {
                        character: "üè¶",
                        question: "Como Seraph deve implementar token introspection?",
                        leigo: "Quando Seraph n√£o consegue verificar um token sozinho, ele pode perguntar diretamente para quem emitiu: 'Este token ainda √© v√°lido?'",
                        tecnico: "Implementar RFC 7662 token introspection endpoint para tokens opacos, com cache adequado e fallback para casos onde valida√ß√£o local falha."
                    },
                    {
                        character: "üë©‚Äçüíª",
                        question: "Como Devia deve projetar a arquitetura para alta disponibilidade?",
                        leigo: "Devia deve preparar planos B: se um servi√ßo cair, ter outro de reserva, e garantir que usu√°rios n√£o percam acesso por problemas t√©cnicos.",
                        tecnico: "Implementar load balancing, circuit breakers, token caching, m√∫ltiplos Authorization Servers, graceful degradation e health checks automatizados."
                    }
                ]
            }
        };

        // Estado atual do quiz
        let currentPath = null;
        let currentCardIndex = 0;
        let isFlipped = false;

        // Fun√ß√£o para iniciar um caminho
        function startPath(pathName) {
            currentPath = pathName;
            currentCardIndex = 0;
            
            document.getElementById('pathSelection').classList.add('d-none');
            document.getElementById('flashcardInterface').classList.remove('d-none');
            
            const pathData = flashcardData[pathName];
            document.getElementById('pathTitle').textContent = pathData.title;
            document.getElementById('pathDescription').textContent = pathData.description;
            document.getElementById('totalQuestions').textContent = pathData.cards.length;
            
            loadCard();
        }

        // Fun√ß√£o para carregar um card
        function loadCard() {
            if (!currentPath) return;
            
            const pathData = flashcardData[currentPath];
            const card = pathData.cards[currentCardIndex];
            
            document.getElementById('questionCharacter').textContent = card.character;
            document.getElementById('questionText').textContent = card.question;
            document.getElementById('answerLeigo').textContent = card.leigo;
            document.getElementById('answerTecnico').textContent = card.tecnico;
            
            document.getElementById('currentQuestion').textContent = currentCardIndex + 1;
            
            // Reset flip state
            document.getElementById('flashcard').classList.remove('flipped');
            isFlipped = false;
            
            // Update progress bar
            const progress = ((currentCardIndex + 1) / pathData.cards.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // Update button states
            document.getElementById('btnPrevious').disabled = currentCardIndex === 0;
            
            if (currentCardIndex === pathData.cards.length - 1) {
                document.getElementById('btnNext').textContent = 'Finalizar üéâ';
            } else {
                document.getElementById('btnNext').textContent = 'Pr√≥xima ‚û°Ô∏è';
            }
            
            // Hide completion card
            document.getElementById('completionCard').classList.add('d-none');
        }

        // Fun√ß√£o para virar o card
        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        // Fun√ß√£o para pr√≥ximo card
        function nextCard() {
            if (!currentPath) return;
            
            const pathData = flashcardData[currentPath];
            
            if (currentCardIndex < pathData.cards.length - 1) {
                currentCardIndex++;
                loadCard();
            } else {
                // Fim do caminho
                showCompletion();
            }
        }

        // Fun√ß√£o para card anterior
        function previousCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                loadCard();
            }
        }

        // Fun√ß√£o para mostrar tela de conclus√£o
        function showCompletion() {
            document.getElementById('flashcardInterface').classList.add('d-none');
            document.getElementById('completionCard').classList.remove('d-none');
            
            // Update progress to 100%
            document.getElementById('progressBar').style.width = '100%';
        }

        // Fun√ß√£o para reiniciar caminho
        function resetPath() {
            if (confirm('Tem certeza que deseja reiniciar este caminho?')) {
                currentCardIndex = 0;
                loadCard();
            }
        }

        // Fun√ß√£o para voltar √† sele√ß√£o
        function goBackToSelection() {
            currentPath = null;
            currentCardIndex = 0;
            
            document.getElementById('flashcardInterface').classList.add('d-none');
            document.getElementById('completionCard').classList.add('d-none');
            document.getElementById('pathSelection').classList.remove('d-none');
        }

        // Event listeners para teclado
        document.addEventListener('keydown', function(e) {
            if (currentPath && !document.getElementById('flashcardInterface').classList.contains('d-none')) {
                if (e.code === 'Space') {
                    e.preventDefault();
                    flipCard();
                } else if (e.code === 'ArrowRight') {
                    e.preventDefault();
                    nextCard();
                } else if (e.code === 'ArrowLeft') {
                    e.preventDefault();
                    previousCard();
                }
            }
        });
    </script>
</body>
</html>